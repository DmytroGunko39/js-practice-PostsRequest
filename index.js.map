{"version":3,"file":"index.js","sources":["../src/js/mockapi.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://683d54c2199a0039e9e4fc76.mockapi.io/';\n\n//requst for the posts\nexport const getAllPosts = () => axios.get(`/posts`);\n\nexport const createNewPost = post => axios.post(`/posts`, post);\n\nexport const deletePostById = postId => axios.delete(`/posts/${postId}`);\n","export const createPostCartTemplate = ({ id, title, body }) => {\n  return `\n<li class=\"posts-list-item\">\n  <button class=\"post-delete-btn\" type=\"button\" data-delete data-post-id='${id}' >\n    <svg class=\"post-delete-icon\" width=\"16\" height=\"16\">\n      <use href=\"/js-practice-PostsRequest/icons.svg#icon-trash\"></use>;\n      </svg>\n   </button>\n   <h3 class=\"posts-list-item-title\">${title}</h3>\n  <p class=\"posts-list-item-text\">${body}</p>\n</li>\n\n  `;\n};\n\n/* <use href=\"../img/icons.svg#icon-trash\"></use>; */\n","import { getAllPosts, createNewPost, deletePostById } from './js/mockapi';\nimport { createPostCartTemplate } from './js/render-function';\nimport iziToast from 'izitoast';\n\nconst refs = {\n  postList: document.querySelector('.js-posts-list'),\n  postForm: document.querySelector('.js-post-form'),\n};\n\nconst renderPosts = async () => {\n  try {\n    const { data: posts } = await getAllPosts();\n\n    const postTemplate = posts\n      .map(post => createPostCartTemplate(post))\n      .join(' ');\n\n    refs.postList.innerHTML = postTemplate;\n  } catch (err) {\n    console.log(err);\n  }\n};\nrenderPosts();\n\nconst onPostFotmSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    const { currentTarget: postForm } = event;\n\n    const formData = {\n      title: postForm.elements.post_title.value.trim(),\n      body: postForm.elements.post_body.value.trim(),\n    };\n\n    const formDataValues = Object.values(formData);\n\n    const emptyValue = formDataValues.find(value => value === '');\n\n    if (emptyValue === '') {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'All fields must be filled out',\n        timeout: 3000,\n        position: 'topRight',\n        messageColor: '#fff',\n        titleColor: '#fff',\n        backgroundColor: '#FFA500',\n      });\n      return;\n    }\n\n    const { data: post } = createNewPost(formData);\n    iziToast.success({\n      title: 'Success',\n      message: `${post.title} added successfully!`,\n      timeout: 3000,\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n    });\n    postForm.reset();\n\n    renderPosts();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst onDeleteBtnClick = async event => {\n  try {\n    const deleteBtn = event.target.closest('button[data-delete]');\n\n    if (deleteBtn === null) {\n      return;\n    }\n\n    const postId = deleteBtn.dataset.postId;\n\n    const { data: post } = await deletePostById(postId);\n    iziToast.success({\n      title: 'Success',\n      message: `${post.title} successfully deleted!`,\n      timeout: 3000,\n      position: 'topRight',\n    });\n    renderPosts();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nrefs.postForm.addEventListener('submit', onPostFotmSubmit);\nrefs.postList.addEventListener('click', onDeleteBtnClick);\n"],"names":["axios","getAllPosts","createNewPost","post","deletePostById","postId","createPostCartTemplate","id","title","body","refs","renderPosts","posts","postTemplate","err","onPostFotmSubmit","event","postForm","formData","value","iziToast","onDeleteBtnClick","deleteBtn"],"mappings":"6vBACAA,EAAM,SAAS,QAAU,+CAGlB,MAAMC,EAAc,IAAMD,EAAM,IAAI,QAAQ,EAEtCE,EAAgBC,GAAQH,EAAM,KAAK,SAAUG,CAAI,EAEjDC,EAAiBC,GAAUL,EAAM,OAAO,UAAUK,CAAM,EAAE,ECR1DC,EAAyB,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,KAAAC,CAAI,IAC/C;AAAA;AAAA,4EAEmEF,CAAE;AAAA;AAAA;AAAA;AAAA;AAAA,uCAKvCC,CAAK;AAAA,oCACRC,CAAI;AAAA;AAAA;AAAA,ICLlCC,EAAO,CACX,SAAU,SAAS,cAAc,gBAAgB,EACjD,SAAU,SAAS,cAAc,eAAe,CAClD,EAEMC,EAAc,SAAY,CAC9B,GAAI,CACF,KAAM,CAAE,KAAMC,GAAU,MAAMX,EAAW,EAEnCY,EAAeD,EAClB,IAAIT,GAAQG,EAAuBH,CAAI,CAAC,EACxC,KAAK,GAAG,EAEXO,EAAK,SAAS,UAAYG,CAC3B,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EACAH,IAEA,MAAMI,EAAmB,MAAMC,GAAS,CACtC,GAAI,CACFA,EAAM,eAAc,EAEpB,KAAM,CAAE,cAAeC,CAAU,EAAGD,EAE9BE,EAAW,CACf,MAAOD,EAAS,SAAS,WAAW,MAAM,KAAM,EAChD,KAAMA,EAAS,SAAS,UAAU,MAAM,KAAM,CACpD,EAMI,GAJuB,OAAO,OAAOC,CAAQ,EAEX,KAAKC,GAASA,IAAU,EAAE,IAEzC,GAAI,CACrBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,gCACT,QAAS,IACT,SAAU,WACV,aAAc,OACd,WAAY,OACZ,gBAAiB,SACzB,CAAO,EACD,MACD,CAED,KAAM,CAAE,KAAMjB,CAAM,EAAGD,EAAcgB,CAAQ,EAC7CE,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,GAAGjB,EAAK,KAAK,uBACtB,QAAS,IACT,SAAU,WACV,aAAc,OACd,WAAY,MAClB,CAAK,EACDc,EAAS,MAAK,EAEdN,GACD,OAAQG,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEMO,EAAmB,MAAML,GAAS,CACtC,GAAI,CACF,MAAMM,EAAYN,EAAM,OAAO,QAAQ,qBAAqB,EAE5D,GAAIM,IAAc,KAChB,OAGF,MAAMjB,EAASiB,EAAU,QAAQ,OAE3B,CAAE,KAAMnB,CAAI,EAAK,MAAMC,EAAeC,CAAM,EAClDe,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,GAAGjB,EAAK,KAAK,yBACtB,QAAS,IACT,SAAU,UAChB,CAAK,EACDQ,GACD,OAAQG,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,EAEAJ,EAAK,SAAS,iBAAiB,SAAUK,CAAgB,EACzDL,EAAK,SAAS,iBAAiB,QAASW,CAAgB"}