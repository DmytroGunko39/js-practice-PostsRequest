{"version":3,"file":"index.js","sources":["../src/js/mockapi.js","../src/img/icons.svg","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://683d54c2199a0039e9e4fc76.mockapi.io/';\n\n//requst for the posts\nexport const getAllPosts = () => {\n  return axios.get(`/posts`);\n};\n\nexport const createNewPost = post => {\n  const fetchOptions = {\n    method: 'POST',\n    body: JSON.stringify(post),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n  return fetch(`${BASE_URL}/posts`, fetchOptions).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n};\n\nexport const deletePostById = postId => {\n  const fetchOptions = {\n    method: 'DELETE',\n  };\n  return fetch(`${BASE_URL}/posts/${postId}`, fetchOptions).then(respons => {\n    if (!respons.ok) {\n      throw new Error(respons.status);\n    }\n    return respons.json();\n  });\n};\n","export default \"data:image/svg+xml,%3c!--%20Generated%20by%20IcoMoon.io%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20style='display:%20none;'%3e%3csymbol%20id='icon-trash'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M64%20160v320c0%2017.6%2014.4%2032%2032%2032h288c17.6%200%2032-14.4%2032-32v-320h-352zM160%20448h-32v-224h32v224zM224%20448h-32v-224h32v224zM288%20448h-32v-224h32v224zM352%20448h-32v-224h32v224z'%3e%3c/path%3e%3cpath%20d='M424%2064h-104v-40c0-13.2-10.8-24-24-24h-112c-13.2%200-24%2010.8-24%2024v40h-104c-13.2%200-24%2010.8-24%2024v40h416v-40c0-13.2-10.8-24-24-24zM288%2064h-96v-31.599h96v31.599z'%3e%3c/path%3e%3c/symbol%3e%3c/svg%3e\"","import icon from '../img/icons.svg';\n\nexport const createPostCartTemplate = ({ id, title, body }) => {\n  return `\n<li class=\"posts-list-item\">\n  <button class=\"post-delete-btn\" type=\"button\" data-delete data-post-id='${id}' >\n    <svg class=\"post-delete-icon\" width=\"16\" height=\"16\">\n      <use href='${icon}#icon-trash'></use>;\n      </svg>\n   </button>\n   <h3 class=\"posts-list-item-title\">${title}</h3>\n  <p class=\"posts-list-item-text\">${body}</p>\n</li>\n\n  `;\n};\n\n/* <use href=\"../img/icons.svg#icon-trash\"></use>; */\n","import { getAllPosts, createNewPost, deletePostById } from './js/mockapi';\nimport { createPostCartTemplate } from './js/render-function';\nimport iziToast from 'izitoast';\n\nconsole.log(deletePostById);\nconst refs = {\n  postList: document.querySelector('.js-posts-list'),\n  postForm: document.querySelector('.js-post-form'),\n};\n\nconst renderPosts = () => {\n  getAllPosts()\n    .then(({ data: posts }) => {\n      const postTemplate = posts\n        .map(post => createPostCartTemplate(post))\n        .join(' ');\n\n      refs.postList.innerHTML = postTemplate;\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\nrenderPosts();\n\nconst onPostFotmSubmit = event => {\n  event.preventDefault();\n\n  const { currentTarget: postForm } = event;\n\n  console.dir(postForm);\n  const formData = {\n    title: postForm.elements.post_title.value.trim(),\n    body: postForm.elements.post_body.value.trim(),\n  };\n\n  const formDataValues = Object.values(formData);\n\n  const emptyValue = formDataValues.find(value => value === '');\n\n  if (emptyValue === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'All fields must be filled out',\n      timeout: 3000,\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n      backgroundColor: '#FFA500',\n    });\n    return;\n  }\n\n  createNewPost(formData)\n    .then(post => {\n      iziToast.success({\n        title: 'Success',\n        message: `${post.title} added successfully!`,\n        timeout: 3000,\n        position: 'topRight',\n        messageColor: '#fff',\n        titleColor: '#fff',\n      });\n      postForm.reset();\n\n      renderPosts();\n\n      console.log(post);\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nconst onDeleteBtnClick = event => {\n  const deleteBtn = event.target.closest('button[data-delete]');\n\n  if (deleteBtn === null) {\n    return;\n  }\n\n  const postId = deleteBtn.dataset.postId;\n\n  deletePostById(postId)\n    .then(post => {\n      iziToast.success({\n        title: 'Success',\n        message: `${post.title} successfully deleted!`,\n        timeout: 3000,\n        position: 'topRight',\n      });\n      renderPosts();\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nrefs.postForm.addEventListener('submit', onPostFotmSubmit);\nrefs.postList.addEventListener('click', onDeleteBtnClick);\n"],"names":["axios","getAllPosts","createNewPost","post","fetchOptions","response","deletePostById","postId","respons","icon","createPostCartTemplate","id","title","body","refs","renderPosts","posts","postTemplate","err","onPostFotmSubmit","event","postForm","formData","value","iziToast","onDeleteBtnClick","deleteBtn"],"mappings":"wvBACAA,EAAM,SAAS,QAAU,+CAGlB,MAAMC,EAAc,IAClBD,EAAM,IAAI,QAAQ,EAGdE,EAAgBC,GAAQ,CACnC,MAAMC,EAAe,CACnB,OAAQ,OACR,KAAM,KAAK,UAAUD,CAAI,EACzB,QAAS,CACP,eAAgB,kBACjB,CACL,EACE,OAAO,MAAM,GAAG,QAAQ,SAAUC,CAAY,EAAE,KAAKC,GAAY,CAC/D,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,EAEaC,EAAiBC,GAAU,CACtC,MAAMH,EAAe,CACnB,OAAQ,QACZ,EACE,OAAO,MAAM,GAAG,QAAQ,UAAUG,CAAM,GAAIH,CAAY,EAAE,KAAKI,GAAW,CACxE,GAAI,CAACA,EAAQ,GACX,MAAM,IAAI,MAAMA,EAAQ,MAAM,EAEhC,OAAOA,EAAQ,MACnB,CAAG,CACH,EClCeC,EAAA,qoBCEFC,EAAyB,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,KAAAC,CAAI,IAC/C;AAAA;AAAA,4EAEmEF,CAAE;AAAA;AAAA,mBAE3DF,CAAI;AAAA;AAAA;AAAA,uCAGgBG,CAAK;AAAA,oCACRC,CAAI;AAAA;AAAA;AAAA,ICPxC,QAAQ,IAAIP,CAAc,EAC1B,MAAMQ,EAAO,CACX,SAAU,SAAS,cAAc,gBAAgB,EACjD,SAAU,SAAS,cAAc,eAAe,CAClD,EAEMC,EAAc,IAAM,CACxBd,EAAa,EACV,KAAK,CAAC,CAAE,KAAMe,KAAY,CACzB,MAAMC,EAAeD,EAClB,IAAIb,GAAQO,EAAuBP,CAAI,CAAC,EACxC,KAAK,GAAG,EAEXW,EAAK,SAAS,UAAYG,CAChC,CAAK,EACA,MAAMC,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACrB,CAAK,CACL,EACAH,IAEA,MAAMI,EAAmBC,GAAS,CAChCA,EAAM,eAAc,EAEpB,KAAM,CAAE,cAAeC,CAAU,EAAGD,EAEpC,QAAQ,IAAIC,CAAQ,EACpB,MAAMC,EAAW,CACf,MAAOD,EAAS,SAAS,WAAW,MAAM,KAAM,EAChD,KAAMA,EAAS,SAAS,UAAU,MAAM,KAAM,CAClD,EAME,GAJuB,OAAO,OAAOC,CAAQ,EAEX,KAAKC,GAASA,IAAU,EAAE,IAEzC,GAAI,CACrBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,gCACT,QAAS,IACT,SAAU,WACV,aAAc,OACd,WAAY,OACZ,gBAAiB,SACvB,CAAK,EACD,MACD,CAEDtB,EAAcoB,CAAQ,EACnB,KAAKnB,GAAQ,CACZqB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,GAAGrB,EAAK,KAAK,uBACtB,QAAS,IACT,SAAU,WACV,aAAc,OACd,WAAY,MACpB,CAAO,EACDkB,EAAS,MAAK,EAEdN,IAEA,QAAQ,IAAIZ,CAAI,CACtB,CAAK,EACA,MAAMe,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACrB,CAAK,CACL,EAEMO,EAAmBL,GAAS,CAChC,MAAMM,EAAYN,EAAM,OAAO,QAAQ,qBAAqB,EAE5D,GAAIM,IAAc,KAChB,OAGF,MAAMnB,EAASmB,EAAU,QAAQ,OAEjCpB,EAAeC,CAAM,EAClB,KAAKJ,GAAQ,CACZqB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,GAAGrB,EAAK,KAAK,yBACtB,QAAS,IACT,SAAU,UAClB,CAAO,EACDY,GACN,CAAK,EACA,MAAMG,GAAO,CACZ,QAAQ,IAAIA,CAAG,CACrB,CAAK,CACL,EAEAJ,EAAK,SAAS,iBAAiB,SAAUK,CAAgB,EACzDL,EAAK,SAAS,iBAAiB,QAASW,CAAgB"}